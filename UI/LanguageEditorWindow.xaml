<ui:FluentWindow
    x:Class="Automatization.UI.LanguageEditorWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="Language Editor"
    Width="900"
    Height="600"
    ExtendsContentIntoTitleBar="True"
    WindowBackdropType="Mica"
    WindowStartupLocation="CenterOwner"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <ui:TitleBar
            Title="Language Editor"
            Grid.Row="0"
            Icon="{ui:SymbolIcon LocalLanguage24}" />

        <Border
            Grid.Row="1"
            Padding="16"
            Background="{DynamicResource ControlFillColorDefaultBrush}"
            BorderBrush="{DynamicResource SurfaceStrokeColorDefaultBrush}"
            BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    <TextBlock
                        Margin="0,0,0,5"
                        FontWeight="SemiBold"
                        Text="Target Language Code" />
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ui:TextBox
                            x:Name="TxtLangCode"
                            PlaceholderText="e.g. ro-RO"
                            Text="" />
                        <ui:Button
                            x:Name="BtnBrowseLang"
                            Grid.Column="1"
                            Width="36"
                            Height="36"
                            Margin="5,0,0,0"
                            Appearance="Secondary"
                            Click="BtnBrowseLang_Click"
                            Icon="{ui:SymbolIcon Globe24}"
                            ToolTip="Browse Languages" />
                    </Grid>
                </StackPanel>

                <StackPanel Grid.Column="1" Margin="10,0,10,0">
                    <TextBlock
                        Margin="0,0,0,5"
                        FontWeight="SemiBold"
                        Text="Contributor Nickname" />
                    <ui:TextBox
                        x:Name="TxtNickname"
                        PlaceholderText="Your Name / Discord Tag"
                        Text="" />
                </StackPanel>

                <StackPanel Grid.Column="2" Margin="10,0,10,0">
                    <TextBlock
                        Margin="0,0,0,5"
                        FontWeight="SemiBold"
                        Text="Filter by Category" />
                    <ComboBox
                        x:Name="CmbCategories"
                        HorizontalAlignment="Stretch"
                        SelectionChanged="CmbCategories_SelectionChanged" />
                </StackPanel>

                <StackPanel
                    Grid.Column="3"
                    Margin="10,0,0,0"
                    VerticalAlignment="Center">
                    <TextBlock
                        FontSize="11"
                        Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                        Text="1. Fill in the details." />
                    <TextBlock
                        FontSize="11"
                        Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                        Text="2. Translate strings in the grid." />
                    <TextBlock
                        FontSize="11"
                        Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                        Text="3. Click 'Send' to submit." />
                </StackPanel>
            </Grid>
        </Border>

        <DataGrid
            x:Name="TranslationGrid"
            Grid.Row="2"
            AutoGenerateColumns="False"
            CanUserAddRows="False"
            CanUserDeleteRows="False"
            CanUserSortColumns="True"
            HeadersVisibility="Column"
            SelectionMode="Single"
            SelectionUnit="FullRow">
            <DataGrid.Columns>
                <DataGridTextColumn
                    Width="200"
                    Binding="{Binding Key}"
                    Header="Resource Key"
                    IsReadOnly="True" />

                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding OriginalValue}"
                    Header="English (Source)"
                    IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap" />
                            <Setter Property="Padding" Value="5" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding TranslatedValue, UpdateSourceTrigger=PropertyChanged}"
                    Header="Your Translation">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap" />
                            <Setter Property="Padding" Value="5" />
                            <Setter Property="Background" Value="{DynamicResource ControlSolidFillColorDefaultBrush}" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="TextBox">
                            <Setter Property="TextWrapping" Value="Wrap" />
                            <Setter Property="AcceptsReturn" Value="True" />
                            <Setter Property="Padding" Value="5" />
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>

        <Border
            Grid.Row="3"
            Padding="16"
            Background="{DynamicResource ControlFillColorDefaultBrush}"
            BorderBrush="{DynamicResource SurfaceStrokeColorDefaultBrush}"
            BorderThickness="0,1,0,0">
            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                <ui:Button
                    x:Name="BtnSaveLocal"
                    Margin="0,0,10,0"
                    Appearance="Secondary"
                    Click="BtnSaveLocal_Click"
                    Content="Save to File"
                    Icon="{ui:SymbolIcon Save24}" />

                <ui:Button
                    x:Name="BtnSend"
                    Appearance="Primary"
                    Click="BtnSend_Click"
                    Content="Send"
                    Icon="{ui:SymbolIcon Send24}" />
            </StackPanel>
        </Border>
    </Grid>
</ui:FluentWindow>
